<ng-template #content let-modal>
  <nb-card class="w-100">
    <nb-card-header class="w-100 d-flex justify-content-between align-items-center">
      <div>
        <p class="font-weight-bold">Autre Reference</p>
      </div>
<!--      <div>-->
<!--        <button class="btn btn-primary" (click)="toggleAddForm()">-->
<!--          <i class="fa-regular fa-plus"></i> Add Reference-->
<!--        </button>-->
<!--      </div>-->
    </nb-card-header>
    <nb-card-body>
      <form *ngIf="showAddForm">
        <div class="w-75 d-flex flex-column align-items-center justify-content-center">
          <input type="text" placeholder="Reference" [(ngModel)]="reference" [ngModelOptions]="{standalone: true}" required>
          <input type="number" placeholder="Value" [(ngModel)]="value" [ngModelOptions]="{standalone: true}" required>
        </div>
        <div class="w-75 d-flex justify-content-center align-items-center">
          <button class="btn btn-primary" (click)="addReference()">Add</button>
        </div>
      </form>
      <form *ngIf="showUpdateForm">
        <div class="w-75 d-flex flex-column align-items-center justify-content-center">
          <input type="text" placeholder="Reference" [(ngModel)]="componentBackup.reference" [ngModelOptions]="{standalone: true}" required>
          <input type="number" placeholder="Value" [(ngModel)]="componentBackup.value" [ngModelOptions]="{standalone: true}" required>
        </div>
        <div class="w-75 d-flex justify-content-center align-items-center">
          <button class="btn btn-primary" (click)="updateReference()">Modifier</button>
        </div>
      </form>
      <div *ngIf="rowData.backupRef.length > 0">
        <table class="table mt-3">
          <thead>
          <tr>
            <th>
              <button class="btn btn-primary" (click)="toggleAddForm()">
                <i class="fa-regular fa-plus"></i>
              </button>
            </th>
            <th>ID</th>
            <th>Reference</th>
            <th>Value</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let item of rowData.backupRef">
            <button class="btn" (click)="toggleUpdateForm(item)"> <i class="fa-regular fa-pen-to-square"></i> </button>
            <button class="btn" > <i class="fa-regular fa-trash-can"></i> </button>
            <td>{{ item.id }}</td>
            <td>{{ item.reference }}</td>
            <td>{{ item.value }} {{ rowData.category.measurementUnit }}</td>
          </tr>
          </tbody>
        </table>
      </div>
      <div *ngIf="rowData.backupRef.length === 0" class="no-reference">
        No component references available.
      </div>
    </nb-card-body>
    <nb-card-footer>
      {{rowData.backupRef.length}} Composant(s)
    </nb-card-footer>
  </nb-card>
</ng-template>

<button class="btn btn-lg btn-outline-primary mt-3" (click)="open(content)">
  <i class="fa fa-info"></i>
</button>
